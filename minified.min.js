function Interaction(a){this.changeables={};this.currentScene=0;this.currentSubscene=0;this.type="";this.record;this.dom=a;this.probCalculable=null;this.subprobCalcuable=[];this.sceneMap=new SceneMap();this.totalScenes=null;this.events=new EventEmitter(self);this.totalEmptyScenes=0;this.subtotalEmptyScenes=[];return this}Interaction.prototype.initialize=function(){var a=this;this.controls={start:function(b){a.currentScene=0;a.currentSubscene=0;a.sceneMap.initialize(a.totalScenes);a.totalEmptyScenes=a.sceneMap.totalEmptyScenes;a.record.redact("start");a.controls.forward()},reset:function(b){a.currentScene=0;a.currentSubscene=0;a.sceneMap.initialize(a.totalScenes);a.totalEmptyScenes=a.sceneMap.totalEmptyScenes;a.record.redact("start")},forward:function(){console.log(a.currentScene);if(a.currentScene===a.totalScenes){var b=a.type||"linear";switch(b){case"linear":a.record.assert("end");a.record.report();break;case"loop":if(simpleFunctions.inArray("end",a.record.assertions)){a.record.reset();a.controls.reset()}else{a.record.assert("end");a.record.report()}break;default:break}}switch(a.currentScene){case 0:console.log(a.currentScene);a.currentScene++;break;default:console.log(a.currentScene);if(a.sceneMap.map[a.currentScene]!==undefined){if(typeof(a.sceneMap.map[a.currentScene])=="object"&&a.currentSubscene<a.sceneMap.map[a.currentScene].length-1){a.currentSubscene++}else{if(a.sceneMap.map[a.currentScene+1]!==undefined){a.currentScene++;a.currentSubscene=0}}}break}a.controls.updateAllContent()},backward:function(){if(a.currentScene>0){if(a.currentSubscene>0){a.currentSubscene--}else{if(a.currentScene>1){a.currentScene--;a.currentSubscene=a.sceneMap.map[a.currentScene].length-1}else{if(a.currentScene==1){if(a.currentSubscene>=1){a.currentSubscene--}}}}}a.controls.updateAllContent()},assert:function(b){a.record.assert(b)},redact:function(b){a.record.redact(b)},record:function(b){a.record.record(b)},silent:function(b){a.record.silent(b)},result:function(b){a.record.result(b)},updateAllContent:function(){a.controls.updateDynamicContent();a.controls.updateDynamicAppearances();a.controls.updateConditionalContent()},updateDynamicContent:function(c){for(var b in a.changeables.content){a.changeables.content[b].dynamicClass(a.currentScene,a.currentSubscene)}},updateDynamicAppearances:function(){for(var c in a.changeables.appearance){a.changeables.appearance[c].dynamicClass(a.currentScene,a.currentSubscene)}if(a.sceneMap.map[a.currentScene]=="unsigned"){for(var c in a.changeables.unsigned){var b=a.changeables.unsigned[c].determineProbability(a.currentScene,a.currentSubscene,a.probability());if(b===true){break}}}},updateConditionalContent:function(){for(var b in a.changeables.conditionals){a.changeables.conditionals[b].dynamicClass(a.record.assertions)}},updateResultContent:function(){a.controls.updateResultContents();a.controls.updateResultClasses();a.controls.updateResultAttributes()},updateResultClasses:function(){for(var b in a.changeables.resultClass){a.changeables.resultClass[b].dynamicClass(a.record.results)}},updateResultAttributes:function(b){for(var c in a.changeables.resultAttribute){a.changeables.resultAttribute[c].dynamicClass(a.record.results)}},updateResultContents:function(b){for(var c in a.changeables.resultContent){a.changeables.resultContent[c].dynamicClass(a.record.results)}}};this.events.on("dynamic-content-initialized",function(b){a.sceneMap.addToSceneMap(b)});this.events.on("dynamic-appearance-initialized",function(b){a.sceneMap.addToSceneMap(b)});this.events.on("unsigned-element",function(b){a.sceneMap.addToUnsigned(b)});this.events.on("control-given",function(c,b){a.controls[c](b)});this.events.on("probable",function(b){a.resetProbability(b)});this.events.on("list-updated",function(){a.controls.updateConditionalContent()});this.events.on("record-totaled",function(){a.controls.updateResultContent()});this.type=function(b){var c=b.dom.getAttribute("data-type");return c}(a);this.resetProbability=function(b){this.changeables.appearance.push(b);this.changeables.unsigned.splice(simpleFunctions.findObject(this.changeables.unsigned,b,"index"),1);this.sceneMap.totalPossibleScenes--;this.probCalculable=1;this.totalEmptyScenes--;this.changeables.unsigned=simpleFunctions.shuffleArray(this.changeables.unsigned)};this.probability=function(){var b;if(this.probCalculable==null){this.probCalculable=1}if(this.sceneMap.totalPossibleScenes>=this.probCalculable){b=this.probCalculable/this.totalEmptyScenes;this.probCalculable++}else{b=1}if(b==Infinity){b=0}return b};this.record=function(c,f){if(window.abstractions!==undefined){var b=window.abstractions;var e=b["record-style"]}else{var b=null;var e="assert"}var d=new AbstractRecord(b,e,c.type);d.initialize();return d}(a);this.totalScenes=function(b){var c=b.dom.getAttribute("data-scenes");b.dom.removeAttribute("data-scenes");if(c===null||isNaN(Number(c))===true){return null}else{return Number(c)}}(a);this.controller=function(c){var b=[];if($(c.dom).find(".control").length){var e=$(c.dom).find(".control");var d=[];$(e).each(function(g){var h=e[g];var f=$(h).data("control").split("+");d={tempdom:h,templistener:$(h).data("control-listener"),tempcontrol:f,tempapprove:$(h).data("confirm")};e[g].removeAttribute("data-control");e[g].removeAttribute("data-control-listener");e[g].removeAttribute("data-confirm");var i=new ControllerObject(d.tempdom,d.templistener,d.tempcontrol,d.tempapprove);i.initialize();b.push(i)})}else{newController=new ControllerObject(c.dom,"default","forward");newController.initialize();b.push(newController)}return b}(a);this.changeables=function(u){var q={appearance:[],content:[],conditionals:[],unsigned:[],resultClass:[],resultAttribute:[],resultContent:[]};var g=$(u.dom).find(".dynamic");var o=$(u.dom).find(".dynamic-content");var d=$(u.dom).find(".conditional");var h=$(u.dom).find(".result-class");var m=$(u.dom).find(".result-attribute");var c=$(u.dom).find(".result-content");if(d.length){for(var p=0;p<d.length;p++){var b=new ConditionalContent(d[p],d[p].getAttribute("class"));b.initialize();b.dynamicClass(u.record.assertions);q.conditionals.push(b)}}else{q.conditionals=[]}if(g.length){for(var p=0;p<g.length;p++){var e=new DynamicAppearance(g[p],g[p].getAttribute("class"));e.initialize();if(e.unsigned===true){q.unsigned.push(e)}else{q.appearance.push(e)}}}else{q.appearance=[]}if(o.length){for(var n=0;n<o.length;n++){var t=new DynamicContent(o[n]);t.initialize();q.content.push(t)}}else{q.content=[]}if(h.length){for(var i=0;i<h.length;i++){var s=new ComplexClass(h[i]);s.initialize();q.resultClass.push(s)}}else{q.resultClass=[]}if(m.length){for(var i=0;i<m.length;i++){var f=new ComplexAttribute(m[i]);f.initialize();q.resultAttribute.push(f)}}else{q.resultAttribute=[]}if(c.length){for(var i=0;i<c.length;i++){var r=new ComplexContent(c[i]);r.initialize();q.resultContent.push(r)}}else{q.resultContent=[]}if(q.appearance===null&&q.content===null&&q.conditionals){return null}else{return q}}(a)};function DynamicAppearance(b,a){this.dom=b;this.appearances={};this.currentState=[];this.defaultClass=a;this.events=new EventEmitter(self);this.unsigned=false;defaultEvents.animEnd(this);return this}DynamicAppearance.prototype.initialize=function(){var a=this;this.appearances=function(j){if($(j.dom).data("scenemap")){var e=$(j.dom).data("scenemap").split(" ");var k=[];var l,f,i,h,d,b;for(var g=0;g<e.length;g++){var c=e[g].split(":");d={};l=c[0];f=0;if(isNaN(Number(l))){b=l.split("-");l=isNaN(Number(b[0]))==false?Number(b[0]):b[0];h=isNaN(Number(c[1]))==false?Number(c[1]):c[1];if(isNaN(Number(b[1]))==true){f="all";j.unsigned=b[0]=="all"?false:true;d[f]=h}else{f=Number(b[1]);d[f]=h}if(isNaN(Number(l))){l="unsigned";j.unsigned=true}else{l=Number(l)}}else{d={all:c[1]}}if(l==""){}else{if(k[l]==undefined){k[l]=[]}k[l].push(d);j.events.emit("dynamic-appearance-initialized",[l,f]);if(l=="unsigned"||f=="unsigned"){j.events.emit("unsigned-element",[l,f])}}}j.dom.removeAttribute("data-scenemap")}else{return null}return k}(a)};DynamicAppearance.prototype.dynamicClass=function(d,e){var i=this;var f=i.dom.getAttribute("class");var c="";for(var a in i.appearances){for(var h in i.appearances[a]){var g=i.appearances[a][h];var b=Object.keys(i.appearances[a][h]);if(a==d){if(b=="all"||b==e){if(f.indexOf(g[b])==-1){c+=" "+g[b]}}else{f=f.replace(" "+g[b],"")}}else{f=f.replace(" "+g[b],"")}}}f+=c;i.dom.setAttribute("class",f);i.currentState=c;return f};DynamicAppearance.prototype.determineProbability=function(c,a,d){var b=Math.random();if(b<d){this.appearances[c]=this.appearances.unsigned;delete this.appearances.unsigned;this.dynamicClass(c,a);this.events.emit("probable",this);return true}else{return false}};function DynamicContent(a){this.dom=a;this.contents={};this.events=new EventEmitter(self);defaultEvents.animEnd(this);return this}DynamicContent.prototype.initialize=function(){var a=this;this.contents=function(n){var c={};var j=[];var m=[];var k=$(n.dom).children(".toggle-content");for(var b=0;b<k.length;b++){var i=k[b];var e=i.getAttribute("class");var d=new TemporaryContent(i,e);var h=$(i).data("scenemap").split(":");var f,o,g;var l=h[1].split(" ");d.specialState=l[0];d.callbackState=l[1];if(isNaN(Number(f))){f=h[0].split("-");if(isNaN(Number(f[1]))==true){g=f[1]=="all"?"all":"unsigned"}else{g=Number(f[1])}if(isNaN(Number(f[0]))){o="unsigned"}else{o=Number(f[0])}}else{o=Number(f);g="all"}if(c[o]==undefined){c[o]={};c[o][g]=[]}else{if(c[o][g]==undefined){c[o][g]=[]}}i.removeAttribute("data-scenemap");c[o][g].push(d);n.events.emit("dynamic-content-initialized",[o,g]);if(o=="unsigned"||g=="unsigned"){n.events.emit("unsigned-element",[o,g])}}n.dom.removeAttribute("data-scenemap");return c}(a)};DynamicContent.prototype.dynamicClass=function(b,h,f){var j=this;var a=j.contents;for(var d in a){for(var e in a[d]){var g=a[d][e];for(var i in g){var c=g[i];element=c.dom;classFrom=c.defaultClass;element.setAttribute("class",classFrom);if(d==b){if(e==h||e=="all"){c.currentState="on"}else{c.currentState="off"}c.dynamicClass()}else{c.currentState="off";c.dynamicClass()}}}}};function TemporaryContent(b,a){this.dom=b;this.specialState="";this.callbackState="";this.currentState="new";this.defaultClass=a;defaultEvents.animEnd(this);return this}TemporaryContent.prototype.dynamicClass=function(){var a=this;var b=a.dom.getAttribute("class");if(a.currentState=="new"){return b}else{if(a.currentState=="off"){b=b.replace(" "+a.specialState,"");b=b.replace(" "+a.callbackState,"");b+=a.callbackState==null?"":" "+a.callbackState}else{if(a.currentState=="on"){b=b.replace(" "+a.specialState,"");b=b.replace(" "+a.callbackState,"");b+=a.specialState==null?"":" "+a.specialState}}}a.dom.setAttribute("class",b);return b};function ConditionalContent(a,b){this.dom=a;this.onClass="";this.offClass="";this.startingClass=b;this.currentState=["new"];this.states=[];this.events=new EventEmitter(self);defaultEvents.animEnd(this);return this}ConditionalContent.prototype.initialize=function(){var a=this;a.startingClass=a.dom.getAttribute("class");this.contents=function(k){var b=[];var i=[];if($(k.dom).data("condition")){var j=$(k.dom).data("condition").split(" ");var d,h,g,e,f;for(var c in j){f=j[c].split(":");g=f[0];d=f[1].split("||")[0]||null;h=f[1].split("||")[1]||null;e={};e[g]=[d,h];k.states.push(e)}}else{return null}k.dom.removeAttribute("data-condition");k.events.emit("conditional-initialized");return b}(a)};ConditionalContent.prototype.dynamicClass=function(h){var a=this;var c=a.dom.getAttribute("class");if(h===undefined||h.length===undefined){return c}else{for(var g=0;g<a.states.length;g++){for(var e in a.states[g]){var f=a.states[g][e][0];var b=a.states[g][e][1]}c=c.replace(" "+f,"");c=c.replace(" "+b,"");c+=b==null?"":" "+b;for(var d in h){if(Object.keys(a.states[g])==h[d]){c=c.replace(" "+b,"");c+=f==null?"":" "+f}}}a.dom.setAttribute("class",c);return c}};function ControllerObject(d,b,c,a){this.dom=d;this.children;this.approval=a;this.events=new EventEmitter();this.domListeners=b;this.control=c;this.additional;return this}ControllerObject.prototype.initialize=function(){var a=this;this.control=function(c){var f={};for(var e=0;e<c.control.length;e++){var b=c.control[e].split(":")[0];var d=c.control[e].split(":")[1]==undefined?null:c.control[e].split(":")[1];f[b]=d}return f}(a);this.processedListeners=function(b){var d=typeof b.domListeners;switch(d){case"string":b.setSwitch(b);break;case"ojbect":for(var c=0;c<b.domListeners.length;c++){if(typeof b.domListeners=="string"){b.setSwitch(b)}}break;case"undefined":b.setSwitch(b,"default");break}}(a);this.children=function(c){if(c.approval!==undefined){var d={};var e=$(c.dom).children(".approve");for(var b=0;b<e.length;b++){d[e[b].getAttribute("data-control")]=e[b];e[b].removeAttribute("data-control")}return d}else{return null}}(a);this.emitControls=function(){for(var b in a.control){a.events.emit("control-given",b,a.control[b])}}};ControllerObject.prototype.setSwitch=function(c,a){var b=a||c.domListeners;switch(b){case"default":$(c.dom).on("click",function(f){f.preventDefault();var d=c.dom.getAttribute("class");if(c.approval===undefined){c.emitControls();return true}else{c.dom.setAttribute("class",d+" "+c.approval);$(c.children.revoke).on("click",function(){c.dom.setAttribute("class",d);return false});$(c.children.confirm).on("click",function(){c.dom.setAttribute("class",d);c.emitControls();return false})}});break;default:$(c.dom).on(c.domListeners.toString(),function(f){f.preventDefault();var d=c.dom.getAttribute("class");if(c.approval===undefined){c.emitControls();return true}else{c.dom.setAttribute("class",d+" "+c.approval);$(c.children.revoke).on(c.domListeners,function(){c.dom.setAttribute("class",d);return false});$(c.children.confirm).on(c.domListeners,function(){c.dom.setAttribute("class",d);c.emitControls();return false})}});break}};var SceneMap=function(){this.map=[];this.totalEmptyScenes=0;this.subtotalEmptyScenes=[];this.totalPossibleScenes=0;this.subtotalPossibleScenes=[];this.self=this;this.totalScenes=null;this.sceneProbability=0;this.subsceneProbability=[];this.events=new EventEmitter(this.self);return this};SceneMap.prototype.initialize=function(b){var a=this;this.totalScenes=b;this.map=this.fillSceneMap();this.map=this.reduceSceneMap()};SceneMap.prototype.addToSceneMap=function(b){var a,c;if(b!==undefined){a=b[0];c=b[1];if(isNaN(a)==false&&isNaN(c)===false){if(this.map[a]==undefined){this.map[a]=[]}isInArray=simpleFunctions.inArray(c,this.map[a]);if(isInArray===false){this.map[a][c]=c}}}};SceneMap.prototype.addToUnsigned=function(a){if(a!==undefined){pref=a[0];suff=a[1];if(pref=="unsigned"){this.totalPossibleScenes+=1}if(suff=="unsigned"){if(this.subtotalPossibleScenes[pref]==undefined){this.subtotalPossibleScenes[pref]=0}this.subtotalPossibleScenes[pref]+=1}}};SceneMap.prototype.reduceSceneMap=function(){if(this.totalEmptyScenes>this.totalPossibleScenes){this.totalEmptyScenes=this.totalPossibleScenes}for(var a in this.subtotalEmptyScenes){if(this.subtotalEmptyScenes[a]>this.subtotalPossibleScenes[a]){this.subtotalPossiblities[a]=this.subtotalPossibleScenes[a]}}return this.map};SceneMap.prototype.fillSceneMap=function(){var a=this.totalScenes==null?this.map.length-1:this.totalScenes;var f=a-(this.map.length-1);if(f>0){for(var d=1;d<=this.totalScenes;d++){if(this.map[d]===undefined){this.map[d]="unsigned";this.totalEmptyScenes+=1}}}else{if(f<0){for(var d=this.totalScenes+1;d<this.map.length;d++){delete this.map[d]}}else{for(var d=1;d<=a;d++){if(this.map[d]===undefined){this.map[d]="unsigned";this.totalEmptyScenes+=1}}}}for(var b=1;b<this.map.length;b++){if(this.map[b]!==undefined){var c=this.map[b].length-1;var i=this.map[b][c];for(var e=0;e<i;e++){if(this.map[b][e]===undefined){this.map[b][e]="unsigned";if(this.subtotalEmptyScenes[b]==undefined){this.subtotalEmptyScenes[b]=0}this.subtotalEmptyScenes[b]+=1}}}}return this.map};function AbstractRecord(c,b,e,a,d){this.abstractions=c||undefined;this.format=e;this.recordStyle=b;this.maxAssertions=a||null;this.count=0;this.assertionRollover=d||"shift";this.assertions=[];this.list=[];this.output;this.results={};this.events=new EventEmitter();return this}AbstractRecord.prototype.initialize=function(){var a=this;this.assertions=function(c){var b=[];if(c=="linear"||c===null||c==="loop"){b.push("start")}return b}(a.format);a.events.emit("list-updated");this.output=function(b){if(b.abstractions==undefined){return null}return b.abstractions.output}(a)};AbstractRecord.prototype.process=function(c,f){var e=this;var b=c||e.recordStyle;switch(b){case"assert":var a=function(h){if(typeof h=="string"){var k=simpleFunctions.inArray(h,e.assertions);if(k===false){e.assertions.push(h)}if(e.abstractions!==undefined&&e.abstractions[h]!==undefined){var i={};i[h]=e.abstractions[h];e.list.push(i);e.list[e.list.length-1]["operand"]="add"}}else{for(var j=0;j<h.length;j++){var k=simpleFunctions.inArray(h[j],e.assertions);if(k===false){e.assertions.push(h[j])}if(e.abstractions[h[j]]!==undefined){var i={};i[h]=e.abstractions[h[j]];e.list.push(i);e.list[e.list.length-1]["operand"]="add"}}}e.count++;e.events.emit("list-updated")}(f);break;case"redact":var g=function(i){if(typeof i=="string"){var l=simpleFunctions.inArray(i,e.assertions);if(l===true){var h=e.assertions.indexOf(i);e.assertions.splice(h,1)}if(e.abstractions!==undefined&&e.abstractions[i]!==undefined){var j={};j[i]=e.abstractions[i];e.list.push(j);e.list[e.list.length-1]["operand"]="subtract"}}else{for(var k=0;k<i.length;k++){var l=simpleFunctions.inArray(i[k],e.assertions);if(l===true){var h=e.assertions.indexOf(i[k]);e.assertions.splice(h,1)}if(e.abstractions[i[k]]!==undefined){var j={};j[i]=e.abstractions[i[k]];e.list.push(j);e.list[e.list.length-1]["operand"]="subtract"}}}e.count++;e.events.emit("list-updated")}(f);break;case"silent":var d=function(i){if(typeof i=="string"){var l=simpleFunctions.inArray(i,e.assertions);if(l===true){var h=e.assertions.indexOf(i);e.assertions.splice(h,1)}else{e.assertions.push(i)}if(e.abstractions!==undefined&&e.abstractions[i]!==undefined){var j={};j[i]=e.abstractions[i];e.list.push(j);e.list[e.list.length-1]["operand"]="ignore"}}else{for(var k=0;k<i.length;k++){var l=simpleFunctions.inArray(i[k],e.assertions);if(l===true){var h=e.assertions.indexOf(i[k]);e.assertions.splice(h,1)}else{e.assertions.push(i[k])}if(e.abstractions[i[k]]!==undefined){var j={};j[i]=e.abstractions[i[k]];e.list.push(j);e.list[e.list.length-1]["operand"]="ignore"}}}e.count++;e.events.emit("list-updated")}(f);break}};AbstractRecord.prototype.assert=function(a){this.process("assert",a)};AbstractRecord.prototype.redact=function(a){this.process("redact",a)};AbstractRecord.prototype.silent=function(a){this.process("silent",a)};AbstractRecord.prototype.record=function(a){this.process(false,a)};AbstractRecord.prototype.reset=function(){this.list=[];this.assertions=[];this.count=0;this.results={};this.recordStyle="assert"};AbstractRecord.prototype.switchStyle=function(a){var b=this;var c=a||"toggle";b.recordStyle=c};AbstractRecord.prototype.report=function(){var p=this;var k={};var f={};var h={};var b={};for(var d in p.output){var a={};var j=0;for(var c=0;c<p.list.length;c++){for(var q in p.list[c]){var g=p.list[c][q];var i=1;switch(p.list[c]["operand"]){case"add":i=1;break;case"subtract":i=-1;break;case"ignore":i=0;break}if(q!=="operand"){switch(d){case"unique_type":if(f[g.type]==undefined){f[g.type]=[]}for(var m in g){if(f[g.type][m]==undefined&&m!=="type"){f[g.type][m]=0}if(m!=="type"){f[g.type][m]+=g[m]*i}}break;case"unique_row":if(h[q]==undefined){h[q]=[]}for(var m in g){if(h[q][m]==undefined){h[q][m]=typeof g[m]=="string"?g[m]:0}if(m!=="type"){h[q][m]+=g[m]*i}}break;case"unique_column":for(var m in g){if(b[m]==undefined&&m!=="type"){b[m]=typeof g[m]=="string"?g[m]:0}if(m!=="type"){b[m]+=g[m]*i}}break;case"total":j++;break;default:if(k[d]===undefined){var e={name:d,value:""};var l=p.output[d]}for(var m in g){if(a[m]==undefined&&m!=="type"){a[m]=typeof g[m]=="string"?g[m]:0}if(m!=="type"){a[m]+=g[m]*i}}break}}}}if(l!==undefined){for(var o in a){l=l.replace(">>"+o,a[o])}e.value=l;k[e.name]=e}}k.types=f||null;k.rows=h||null;k.columns=b||null;k.total=j||null;p.results=k;p.events.emit("record-totaled",k);return k};AbstractRecord.prototype.result=function(c){var a=this;var b=c||"report";switch(b){case"report":a.report();break;case"assert":a.switchStyle(c);break;case"redact":a.switchStyle(c);break;case"silent":a.switchStyle(c);break;case"toggle":a.switchStyle();break}};function ComplexAttribute(a){this.dom=a;this.attributes;this.events=new EventEmitter(self);defaultEvents.animEnd(this);return this}ComplexAttribute.prototype.initialize=function(){var a=this;var b=a.dom.getAttribute("data-attribute").split(" ");this.attributes=function(d){var c={};for(var f=0;f<b.length;f++){var e=b[f].split(":");c[e[0]]=e[1]}return c}(a);a.dom.removeAttribute("data-attribute");a.events.emit("complex-attribute-initialized")};ComplexAttribute.prototype.dynamicClass=function(c){var a=this;if(c===undefined){return"no arguments passed"}else{for(var b in a.attributes){a.dom.style[b]=c[a.attributes[b]].value}return"success"}};function ComplexClass(a){this.dom=a;this.sources;this.startingClass;this.events=new EventEmitter(self);defaultEvents.animEnd(this);return this}ComplexClass.prototype.initialize=function(){var a=this;a.startingClass=a.dom.getAttribute("class");this.sources=function(b){var c=b.dom.getAttribute("data-class").split(" ");return c}(a);a.dom.removeAttribute("data-class");a.events.emit("complex-class-initialized")};ComplexClass.prototype.dynamicClass=function(d){var a=this;var b=a.dom.getAttribute("class");if(d===undefined){return b}else{for(var c=0;c<a.sources.length;c++){b+=" "+d[a.sources[c]]}a.dom.setAttribute("class",b);return b}};function ComplexContent(a){this.dom=a;this.containers;this.events=new EventEmitter(self);return this}ComplexContent.prototype.initialize=function(){var a=this;var b=a.dom.getAttribute("data-content").split(" ");this.containers=function(d){var g={};for(var c=0;c<b.length;c++){var f=b[c].split(":");var e=$(d.dom).find(f[0]).each(function(h){g[f[1]]=this});console.log(g)}return g}(a);a.dom.removeAttribute("data-content");a.events.emit("complex-content-initialized")};ComplexContent.prototype.dynamicClass=function(c){var b=this;if(c===undefined){return"no arguments passed"}else{for(var a in b.containers){b.containers[a].innerHTML=c[a].value}return"success"}};var animationEnd=function(a){a.dom.addEventListener("webkitAnimationIteration",function(){this.style.animationName="";this.style.webkitAnimationName="";this.style.animationPlayState="paused";this.style.webkitAnimationPlayState="paused"},false);a.dom.addEventListener("animationIteration",function(){this.style.animationName="";this.style.webkitAnimationPlayState="paused";this.style.animationPlayState="paused"},false)};var defaultEvents={animEnd:animationEnd};function EventEmitter(a){this.self=a}EventEmitter.prototype.events=Object.create(null);EventEmitter.prototype.on=function(a,b){if(typeof this.events[a]!=="undefined"){this.events[a].push(b)}else{this.events[a]=[b]}};EventEmitter.prototype.emit=function(e){if(typeof this.events[e]!=="undefined"){var c=this.events[e];var d=c.length;var b=d;var a=Array.prototype.slice.call(arguments,1);while(b){var f=c[d-(b--)];f.apply(this,a)}}};arrayCheck=function(d,c){var b=c.length;for(var a=0;a<b;a++){if(c[a]==d){return true}}return false};arrayShuffle=function(e){var c,b;var d=e;var a=d.length;while(a){b=Math.random()*a--|0;c=d[a];d[a]=d[b];d[b]=c}return d};arrayFind=function(d,b,a){for(var c=0;c<d.length;c++){if(d[c].dom===b.dom){if(a=="object"){return d[c]}else{if(a=="index"){return c}else{return d[c]}}}}throw"Couldn't find the object"};var simpleFunctions={inArray:arrayCheck,shuffleArray:arrayShuffle,findObject:arrayFind};var masterEmitter=new EventEmitter;var allTheInteractions=function(){var d=document.getElementsByClassName("interaction");var c=[];for(var a=0;a<d.length;a++){var b=new Interaction(d[a]);b.initialize();c.push(b)}return c}();